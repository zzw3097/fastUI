function getRandomColors(a){function b(a){function b(){var a=c(),e=d.every(function(b,c,d){return b!=a});e?d.push(a):b()}for(var e in a)for(var f=a[e],g=0;g<f.length;g++)b(),f[g].style.backgroundColor="rgb("+d[d.length-1].toString()+")"}function c(){for(var a=[],b=0;2e3>b&&3!=a.length;b++){var c=10*Math.random().toFixed(1),d=10*Math.random().toFixed(1),e=10*Math.random().toFixed(1),f=Number(c.toString()+d.toString()+e.toString());f>0&&255>f&&a.push(f)}return a}var d=[c()];b(a)}function upLoad(a){var b=new FormData,c={};return b.append("file",a.fileData),$.ajax({type:"post",data:b,dataType:"json",url:a.url,processData:!1,contentType:!1,async:!1,beforeSend:function(a){},success:function(a){c=a},complete:function(a,b){},error:function(a,b,c){}}),c}var code={0:{msg:"操作成功!",detail:"操作成功，无返回值"},"-1":{msg:"未选中任何信息",detail:"表格操作时，需要选中信息以获取参数才可以执行以下操作"},"-2":{msg:"code返回文本信息设置出错",detail:"code.js文件中，没有对应的参数回调"},"-3":{msg:"表单验证未通过"},"-4":{msg:"表单未设置action属性"},"-8":{msg:"请求未初始化,登录已过期，请重新登录系统！"}};!function(a,b){"use strict";var c="tips";a[c]=function(d,e){clearTimeout(a[c].timeout);var f=a("#"+a[c].options.id),g=d,h=!1;f.length||(f=a("<div/>",{id:a[c].options.id}).prependTo(a[c].options.prependTo)),a[c].options.animate?f.addClass("page_mess_animate"):f.removeClass("page_mess_animate");var i=/^-?\d+$/;if(i.test(d)){var j=code[d];j?g=code[d].msg:a.tips(-2),d>=0&&(e=2)}return f.text(g),e===b||e==a[c].error?f.removeClass(a[c].options.okClass).addClass(a[c].options.errClass):e==a[c].ok&&(f.removeClass(a[c].options.errClass).addClass(a[c].options.okClass),h=!0),f.slideDown("fast",function(){a[c].timeout=setTimeout(function(){f.slideUp("fast")},a[c].options.delay)}),h},a.extend(a[c],{options:{id:"page_message",okClass:"page_mess_ok",errClass:"page_mess_error",animate:!0,delay:2e3,prependTo:"body"},error:1,ok:2})}(jQuery),function(a,b){"use strict";var c="btn",d=function(b){var d=a.data(b,c).options;e(b),b.$button.on("click",function(){if(d.isVerifyRow&&!d.isByIdData){var c=d.gridTarget.datagrid("getRow"),e=d.gridTarget.datagrid("getId");d.handler(c,e)}else if(d.singleSelect||!d.isVerifyRow||d.isByIdData)if(d.isByIdData&&d.isVerifyRow&&d.singleSelect){var e=d.gridTarget.datagrid("getId");a(b).form("post",{url:d.isByIdData,data:{id:e},onSuccess:function(a){d.handler(a.data||a,e)}})}else d.handler(a(b),d.form||null);else{var f=d.gridTarget.datagrid("getRows"),g=d.gridTarget.datagrid("getIds");d.handler(f,g)}})},e=function(b){var d=a.data(b,c).options;"BUTTON"==b.nodeName||"A"==b.nodeName?b.$button=a(b):b.$button=a(b).find("button"),b.$button.addClass("btn "+d.btnClass),b.$button.html('<i class="glyphicon '+d.iconClass+'"></i> <span>'+d.name+"</span>"),b.$button.attr("id",d.id||"btn"),f(b,d.disabled),g(b,d.show)},f=function(b,d){var e=a.data(b,c).options;e.disabled=d||!1,e.disabled?b.$button.attr("disabled","disabled"):b.$button.removeAttr("disabled")},g=function(b,d){var e=a.data(b,c).options;e.show=d||!1,e.show?b.$button.show():b.$button.hide()},h={init:function(b){return b=b||{},this.each(function(){var e=a.data(this,c);e?a.extend({},e.options,b):e=a.data(this,c,{options:a.extend(!0,{},a.fn[c].defaults,b)}),d(this)})},disabled:function(a){return this.each(function(){f(this,a)})},show:function(a){return this.each(function(){g(this,a)})},destory:function(){return this.each(function(){destroy(this)})}};a.fn[c]=function(){var b=arguments[0];return h[b]?(b=h[b],b.apply(this,Array.prototype.slice.call(arguments,1))):"object"!=typeof b&&b?(a.error("Method "+b+" does not exist on jQuery."+c),this):h.init.apply(this,arguments)},a.fn[c].defaults={name:"确定",btnClass:"btn-default",iconClass:"glyphicon-ok",show:!0,autoClose:!0,disabled:!1,enable:!0,handler:function(a,b){}}}(jQuery),function(a,b){"use strict";var c="search",d=function(a){},e={init:function(b){return b=b||{},this.each(function(){var e=a.data(this,c);e?a.extend({},e.options,b):e=a.data(this,c,{options:a.extend(!0,{},a.fn[c].defaults,b)}),d(this)})}};a.fn[c]=function(){var b=arguments[0];return e[b]?(b=e[b],b.apply(this,Array.prototype.slice.call(arguments,1))):"object"!=typeof b&&b?(a.error("Method "+b+" does not exist on jQuery."+c),this):e.init.apply(this,arguments)},a.fn[c].defaults={name:"确定"}}(jQuery),getRandomColors({}),function(a,b){"use strict";function c(b){var c=a.data(b,"dialog").options;a("#"+c.id);a('<div class="modal-backdrop fade"></div>').prependTo(b.$modal).animate({opacity:.5},50,function(){a(this).addClass("in"),b.$modal.addClass("in").css("display","block"),a(document.body).addClass("modal-open")}),b.$modal.find(".modal-dialog").animate({top:0},100,function(){})}function d(b,c){var d=a.data(b,"dialog").options;b.$modal.find(".modal-dialog").animate({top:-30},50,function(){b.$modal.find(".modal-backdrop").removeClass("in"),b.$modal.removeClass("in").css("display","none"),d.destroy&&a(b).dialog("destroy"),a(document.body).removeClass("modal-open")})}function e(b,c){a.data(b,"dialog").options;b.$modal.remove(),a.removeData(b,f)}var f="dialog",g=function(b,c){var d=a.data(b,f);d||(d=a.data(b,f,{options:a.extend(!0,{},a.fn[f].defaults,c)}),h(b))},h=function(b){var c=a.data(b,f).options;b.$modal=i(b),b.$content=a(c.content),b.$modal.hide().appendTo(b.$content),b.$modalContent=k(b),b.$modalContent.appendTo(b.$modal.find(".modal-dialog")),b.$body=b.$modalContent.find(".modal-body"),l(b),j(b),b.$modalContent.on("click",".modal-header button.full",function(){c.isFull?c.isFull=!1:c.isFull=!0,j(b)}),b.$modalContent.on("click",".modal-header button.close",function(){d(b)}),c.contents&&c.contents.indexOf("data-date-format")>=0?using("datetime",function(){c.onLoad(b.$modal)}):c.contents&&c.contents.indexOf("city-picker")>=0?using("area",function(){c.onLoad(b.$modal)}):"form"==c.type?c.onLoad(b.$body.find("form")):c.contents&&c.onLoad(b.$modal)},i=function(b){var c=(a.data(b,f).options,a('<div class="modal fade" tabindex="9"><div style="top:-30px" class="modal-dialog"></div></div>'));return c},j=function(b){var c=a.data(b,f).options,d={};d=c.windowSize.hasOwnProperty("width")?{width:c.windowSize.width,height:c.windowSize.height||"auto",margin:"30px auto",borderRadius:6}:"lg"==c.windowSize?{width:900,height:"auto",margin:"30px auto",borderRadius:6}:"sm"==c.windowSize?{width:300,height:"auto",margin:"30px auto",borderRadius:6}:{width:600,height:"auto",margin:"30px auto",borderRadius:6},b.$modalContent.css("padding-bottom","43px"),c.isFull&&(d={width:a("body").width(),height:a("body").height(),margin:0,borderRadius:0},b.$modalContent.css("padding-bottom","0px")),b.$modalContent.add(b.$modal.find(".modal-dialog")).css(d),b.$modalContent.find(".modal-footer").css({width:d.width-2})},k=function(b){var c=a.data(b,f).options,d="",e="";c.header&&(d='<div class="modal-header"><button type="button" class="close"><span aria-hidden="true">&times;</span><span class="sr-only">关闭</span></button><button type="button" class="full"><span style="top:-1px" class="glyphicon glyphicon-fullscreen"></span><span class="sr-only">最大化</span></button><h4 class="modal-title">'+c.title+"</h4></div>"),c.footer&&(e='<div style="position: fixed;bottom: 0;" class="modal-footer"><div class="btn-group btn-group-justified"></div>');var g=a('<div class="modal-content">'+d+'<div class="modal-body"></div>'+e+"</div>");return g},l=function(b){var c=a.data(b,f).options;if(c.datagrid){var d=a('<div style="margin:10px auto" class="row"><div class="col-sm-12" data-height="true"><div id="'+c.datagrid.id+'"></div></div></div>').prependTo(b.$body);c.datagrid.dialog=!0,c.datagrid.toolbar=!1,d.datagrid(c.datagrid)}if("form"==c.type)var e=a('<form action="'+(c.action||!1)+'" class="form-horizontal"  />').appendTo(b.$body);if(c.formGroup){var g={name:"name",size:"3|9",labelName:"",type:"text",required:!0,readonly:!1,disabled:!1,"class":"form-control",placeholder:"",value:"",autocomplete:"Off",onChange:function(a,b,c){},url:!1,src:null,linkField:null,fileUrl:window.parent.ctx+"/category/uploadImageToCategory",autoUpload:!1,upLoadSize:{width:"auto",height:"auto"},fileSize:2e6,fileType:".jpg|.jpeg|.gif|.bmp|.png|",onUploadSuccess:function(a,b,c){},onUploadError:function(a,b,c){},onLoad:function(a){}};a.each(c.formGroup,function(b){var d=a.extend(!0,{},g,c.formGroup[b]),f=a('<div id="row_'+d.name+'" class="form-group">                                    <label for="'+d.name+'" class="col-sm-'+d.size.split("|")[0]+' control-label">'+(d.required?"* ":"")+" "+d.labelName+'：</label>                                    <div class="group-content col-sm-'+d.size.split("|")[1]+'"></div>                                </div>');if("checkbox"===d.type&&(f=a('<div class="form-group">                                    <div class="col-sm-offset-'+d.size.split("|")[0]+" col-sm-"+d.size.split("|")[1]+'">                                    <div class="group-content checkbox"></div>                                    </div>                                </div>')),"hidden"!=d.type){f.appendTo(e);var h=f.find(".group-content")}if("custom"===d.type&&a(d.custom).appendTo(h),"text"===d.type||"number"===d.type||"password"===d.type){var i=a("<input "+(d.disabled?"disabled":"")+' class="'+d["class"]+'" name="'+d.name+'" type="'+d.type+'" value="'+d.value+'" />').prependTo(h);i.on("change",function(){d.onChange(a(this).val(),e,f)})}if("hidden"===d.type&&a('<input id="'+d.name+'" name="'+d.name+'" type="'+d.type+'" value="'+d.value+'" />').prependTo(e),"file"===d.type){var j=a('<div style="width:60px;height:60px;">                            <i style="font-size:40px;margin:10px;" class="glyphicon glyphicon-plus"></i>                       </div>'),k=a('<input type="file" style="opacity:0;display:none" name="'+d.name+'" />');c.forFormLoad&&c.forFormLoad[d.linkField]?j=a('<img style="width:60px;height:60px;" src='+c.forFormLoad[d.linkField]+" />"):(d.src||d.value)&&(j=a('<img style="width:60px;height:60px;" src='+d.src||d.value+" />")),j.appendTo(h),k.appendTo(h),j.on("click",function(){k.click()}),k.on("change",function(){if(d.autoUpload){var b,c,g=a(this),h=this.files[0],i=g.val().substr(g.val().lastIndexOf(".")).toLowerCase(),k=window.URL||window.webkitURL||window.mozURL;if(h.size>=d.fileSize)return a.tips("上传图片大小不能超过"+d.fileSize+"KB！"),void g.val("");if(-1==d.fileType.indexOf(i+"|"))return a.tips("上传文件格式不支持"+i+"格式！"),void g.val("");(b=this.files[0])&&(c=new Image,c.onload=function(){if("auto"!=d.upLoadSize.width&&this.width!=d.upLoadSize.width||"auto"!=d.upLoadSize.height&&this.height!=d.upLoadSize.height)a.tips("图片上传宽与高必须是：200X200像素"),g.val(""),c.val("");else{var b=upLoad({fileData:h,url:d.fileUrl}),c=e.find("input[name='"+d.linkField+"']");0===b.code?(j.html('<img style="width:60px;height:60px;" src='+b.data+" />"),c.val(b.data),d.onUploadSuccess(b.data,e,f)):(a.tips(b.message),c.val(""),d.onUploadError(b,e,f))}},c.src=k.createObjectURL(b))}else d.onChange(this,e,f)})}if("checkbox"===d.type){var l=a('<label style="padding-left:0px;"><input style="opacity: 1;margin-top:2px;" name="'+d.name+'" value="'+d.value+'" type="checkbox"> <span style="margin-left:20px;">'+d.labelName+"</span></label>").appendTo(h);l.on("click","input",function(){var b=a(this).val();a(this).is(":checked")?a(this).attr("checked",!0):(b=0,a(this).attr("checked",!1)),d.onChange(b,e,f)})}if("radio"===d.type&&(d.list.length>0&&a.each(d.list,function(b,c){var e=a("<label>",{"class":"radio-inline",html:"<input "+(d.disabled?"disabled":"")+' style="opacity: 1;margin-top:2px;left:0px;" type="radio" name="'+d.name+'" value="'+c.value+'"> '+c.name}).appendTo(h);d.value==c.value&&e.find("input").attr("checked","checked")}),h.on("click","input",function(){d.onChange(a(this).val(),e,f)})),"select"===d.type){var m=a("<select "+(d.disabled?"disabled":"")+' class="'+d["class"]+'" name="'+d.name+'"></select>').appendTo(h);if(0==d.url)return void a.tips(d.name+"没有设置路径地址：url参数");m.select({idField:d.idField||"id",textField:d.textField||"name",url:d.url||"",async:d.async||!1,queryParams:d.queryParams||{},defaultText:d.defaultText||"请选择","default":d["default"]||!1,loadData:d.loadData||[],load:d.load||!0,onSelect:function(a,b){d.onSelect&&d.onSelect(a,e,b)},onLoad:function(a){d.onLoad(m)},selected:d.selected})}if("cityPicker"===d.type){var n=a('<input class="'+d["class"]+'" type="'+d.type+'" name="'+d.name+'"/>').appendTo(h);using("area",function(){var b=new Array(3);d.value&&a.each(d.value.split("/"),function(a){b[a]=d.value.split("/")[a]}),n.citypicker({province:b[0],city:b[1],district:b[2],linkField:d.linkField,onSelect:function(a){d.onChange(a,e,f)},disabled:d.disabled})})}if("autocomplete"===d.type){var o=a('<input class="'+d["class"]+'" name="'+d.name+'" type="'+d.type+'" value="'+d.value+'" />').prependTo(h);o.autocomplete({url:d.url,auto:d.auto||4,key:d.key||"search",maxLength:d.maxLength||5,fire:d.fire||1e3,async:d.async||!1,queryParams:d.queryParams||{},bind:d.linkField,idField:d.idField||"id",textField:d.textField||"title",loadData:d.loadData||[],onSelect:function(a,b){d.onSelect&&d.onSelect(a,b)},onLoad:function(a){d.onLoad&&d.onLoad(a)}})}f.find("[name='"+d.name+"']").validate(d)}),c.forFormLoad&&e.form("load",c.forFormLoad)}if(c.iframe){var h=a('<iframe id="'+c.iframe.id+'" scrolling="auto" frameborder="0" src="'+c.iframe.url+'" style="width:100%;height:'+c.form.minHeight+';"></iframe>').appendTo(b.$body);h.on("load",function(){c.iframe.onLoad(h)})}c.contentUrl&&b.$body.load(c.contentUrl,function(){c.onLoad(b.$modal)}),c.contents&&(("confirm"==c.type||"alert"==c.type)&&(c.contents=m(b)),a(c.contents).appendTo(b.$body)),n(b)},m=function(b){var c=a.data(b,f).options,d='<h4 class="media-heading">'+c.title+'：</h4><div class="media"><div class="media-left"><a href="javascript:;"><i style="font-size:60px;" class="glyphicon '+c.icon+'"></i></a></div><div class="media-body"><p>'+c.contents+"</p></div></div>";return d},n=function(b){var c=a.data(b,f).options,d=b.$body.find("form")||b.$modal,e={show:!0,autoClose:!0,form:d,handler:function(a){}};c.footer&&"none"!=c.footer&&(b.$btn={},a.each(c.actionsGroups,function(g,h){c.actions[h]=a.extend(!0,{},e,a.fn[f].defaults.actions[h],c[h]),"confirm"==h&&c.autoSubmit&&(c.actions[h].handler=function(e){d.form("submit",{confirmBtn:a(this),onSuccess:function(d){c.onSuccess(d),c.actions[h].autoClose&&a(b).dialog("close")}})}),"cancel"==h&&c.actions[h].autoClose&&(c.actions[h].handler=function(c){a(b).dialog("close")}),b.$btn[h]=a('<div id="'+h+'" class="btn-group"><button></button></div>').appendTo(b.$modalContent.find(".btn-group-justified")).btn(c.actions[h])}))},o={show:function(){return this.each(function(){c(this)})},close:function(){return this.each(function(){d(this)})},destroy:function(){return this.each(function(){e(this)})},window:function(){var b=arguments[1]||{},d={type:"window",isFull:!0,footer:!1};return this.each(function(){g(this,a.extend(!0,{},d,b)),c(this)})},form:function(){var b=arguments[1]||{},d={type:"form"};return this.each(function(){g(this,a.extend(!0,{},d,b)),c(this)})},confirm:function(){var b=arguments[1]||{},d={type:"confirm",title:"提示",header:!1,windowSize:{width:300,height:171},icon:"glyphicon glyphicon-question-sign"};return this.each(function(){g(this,a.extend(!0,{},d,b)),c(this)})},alert:function(){var b=arguments[1]||{},d={type:"alert",title:"警告",header:!1,windowSize:{width:300,height:171},actions:{cancel:{show:!1}},icon:"glyphicon glyphicon-exclamation-sign"};return this.each(function(){g(this,a.extend(!0,{},d,b)),c(this)})}};a.fn[f]=function(){var b=arguments[0];return o[b]?(b=o[b],b.apply(this,arguments)):"object"!=typeof b&&b?(a.error("Method "+b+" does not exist on jQuery."+f),this):(a.tips("创建类型参数未设置！"),this)},a.fn[f].defaults={title:"",isFull:!1,content:"body",windowSize:"",destroy:!0,footer:!0,header:!0,autoSubmit:!1,actionsGroups:["confirm","cancel"],actions:{confirm:{name:"确定",id:"confirm",btnClass:"btn-primary",iconClass:"glyphicon-ok"},cancel:{name:"取消",id:"cancel",btnClass:"btn-default",iconClass:"glyphicon-remove"}},onLoad:function(){}}}(jQuery),function(a,b){"use strict";var c="autocomplete",d=function(b){var d=a.data(b,c).options;e(b);var g=null;a(b).on("keydown",function(c){var e=k(b);return 40===c.keyCode?(e.index+1<d.maxLength&&j(b,{index:e.index+1}),!1):38===c.keyCode?(e.index-1>=0&&j(b,{index:e.index-1}),!1):37===c.keyCode?!1:39===c.keyCode?!1:13===c.keyCode?(d.onSelect(e,a(b)),d.bind&&a("#"+d.bind).val(e[d.idField]),f(b),!1):void 0}),a(b).on("keyup",function(c){return 40===c.keyCode||38===c.keyCode||37===c.keyCode||39===c.keyCode||13===c.keyCode?!1:(null!=g&&clearTimeout(g),void(g=setTimeout(function(){if(a(b).val().length>=d.auto){var c={};c[d.key]=a(b).val(),h(b,c)}},d.fire)))}),a(b).on("dblclick",function(c){a.isEmptyObject(d.loadData)||a(b.$warp).show()})},e=function(b){var c=a('<div id="warp" class="list-group autocomplete"/>');return b.$warp=c.insertAfter(b).hide(),b},f=function(b){a(b.$warp).hide()},g=function(b){a(b.$warp).css({width:a(b).outerWidth(),top:a(b).offset.top}).show()},h=function(b,d){var e=a.data(b,c).options;a(b).loading({type:"spinner"}),a.ajax({type:"post",data:d,dataType:"json",url:e.url,async:!1,beforeSend:function(a){},success:function(c){0===c.code&&c.data.length>0?(e.loadData=[],i(b,c.data),e.onLoad(b)):a.tips(c.message)},complete:function(c,d){a(b).loading("close")},error:function(b,c,d){a.tips("错误类型textStatus: "+c)}})},i=function(b,d){var e=a.data(b,c).options;a(b.$warp).empty(),a.each(d,function(c,d){if(c<e.maxLength){var h=a("<a>",{href:"javascript:;","class":"list-group-item",click:function(){j(b,{index:c}),e.onSelect(d,a(b)),e.bind&&a("#"+e.bind).val(d[e.idField]),f(b)}}).appendTo(a(b.$warp));e.formatter?e.formatter(d,h):h.html(d[e.textField]),d.index=c,e.loadData.push(d),g(b)}}),j(b,{index:0})},j=function(b,d){var e=a.data(b,c).options;d.index>=0&&(b.$warp.find("a.list-group-item").eq(d.index).addClass("active").siblings().removeClass("active"),a.each(e.loadData,function(a,b){d.index===a?b.selected=!0:b.selected=!1}))},k=function(b){var d=a.data(b,c).options,e=null;return a.each(d.loadData,function(a,b){b.selected&&(e=b)}),e},l={init:function(b){return b=b||{},this.each(function(){var e=a.data(this,c);e?a.extend({},e.options,b):e=a.data(this,c,{options:a.extend(!0,{},a.fn[c].defaults,b)}),d(this)})},hide:function(a){return this.each(function(){f(this)})},show:function(a){return this.each(function(){g(this)})},destory:function(a){return this.each(function(){destroy(this)})}};a.fn[c]=function(){var b=arguments[0];return l[b]?(b=l[b],b.apply(this,Array.prototype.slice.call(arguments,1))):"object"!=typeof b&&b?(a.error("Method "+b+" does not exist on jQuery."+c),this):l.init.apply(this,arguments)},a.fn[c].defaults={url:"",auto:4,key:"search",maxLength:5,fire:1e3,async:!1,queryParams:{},bind:"","default":!1,formatter:!1,idField:"id",textField:"title",loadData:[],onSelect:function(a,b){},onLoad:function(a){}}}(jQuery),function(a,b){"use strict";var c="datagrid",d=function(b){var d=a.data(b,c).options;b.$header=f(b),b.$header.appendTo(a(b)),b.$body=h(b),b.$body.appendTo(a(b)),b.$tableHeader=i(b),b.$tableHeader.appendTo(b.$body),b.$tableWarp=j(b),b.$tableWarp.appendTo(b.$body),b.$footer=k(b),b.$footer.appendTo(a(b)),z(b),d.search&&(b.$search.on("click",".search-form .search-btn",function(){return e(b),!1}),b.$search.on("click",".search-form .senior-btn",function(){var c=a(this),f=c.parents(".search-box"),g=c.parents(".search-form"),h=g.html();f.addClass("senior-box"),g.empty().removeClass("search-form").addClass("form-horizontal");var i=d.search.formGroup;a.each(i,function(b,c){a('<div class="form-group"><label for="'+c.name+'" class="col-sm-2 control-label">'+c.labelName+'：</label><div class="col-sm-10"><input type="text" name="'+c.name+'" class="form-control" id="'+c.name+'" placeholder="'+c.placeholder+'"></div></div>').appendTo(g)}),a('<div class="form-group"><div class="col-sm-offset-2 col-sm-10"><div class="btn-group" role="group"><button type="button" class="btn btn-default search-btn"><i class="glyphicon glyphicon-search"></i> 确认查询</button><button type="button" class="btn btn-default cancel-btn"><i class="glyphicon glyphicon-remove"></i> 取消</button></div></div></div>').appendTo(g),g.form("load",d.queryParams),g.on("click",".search-btn",function(){return e(b),f.removeClass("senior-box"),g.empty().removeClass("form-horizontal").addClass("search-form").html(h),g.form("load",d.queryParams),g.off("click","**"),!1}),g.on("click",".cancel-btn",function(){f.removeClass("senior-box"),g.empty().removeClass("form-horizontal").addClass("search-form").html(h),g.form("load",d.queryParams),g.off("click","**")})}),b.$search.find(".search-form input[name='search']").keydown(function(a){return 13==a.which?(e(b),!1):void 0})),b.$footer.on("change","#gotoPage",function(){var c=Number(a(this).val());c>d.totalPage&&(a(this).val(d.totalPage),c=d.totalPage,a.tips("总页数只有"+d.totalPage+"页，已跳转至最后一页")),0>=c&&(a(this).val(1),c=1),r(b,{page:c})}),b.$footer.on("change","#rows",function(){var c=Number(a(this).val());r(b,{page:1,rows:c})}),b.$footer.on("click","#refresh",function(){s(b)})},e=function(b){var d=a.data(b,c).options,e=a.extend(!0,{},d.queryParams,b.$search.find("form").serializeJson(),{page:1,rows:d.rows});r(b,e)},f=function(b){var d=a.data(b,c).options,e=a('<div class="porlets-content dataGrid-header" style="padding:5px;"><div class="row"></div></div>'),f=e.find(".row");if(d.toolbar&&(d.toolbar.btn||d.toolbar.group)||d.timeTested||d.search){var g={icon:"glyphicon glyphicon-eye-open","class":"btn-default",disabled:!1,enable:!1,isVerifyRow:!0,isEnabled:function(a,b){return!0},isByIdData:!1,gridTarget:a(b),singleSelect:d.singleSelect,handler:function(a){}};if(a('<div class="tools '+d.toolbar.size+'"><div class="btn-group"></div></div>').appendTo(f),d.toolbar.btn&&(b.$btn={},b.btnParams={},a.each(d.toolbar.btn,function(c,f){b.btnParams[c]=a.extend(!0,{},g,d.toolbar.btn[c]),b.btnParams[c].disabled=b.btnParams[c].isVerifyRow,b.$btn[c]=a("<button>").appendTo(e.find(".tools .btn-group")).btn(b.btnParams[c])})),d.timeTested)b.$search=a('<div class="col-sm-6"><form class="search-form" style="padding:0px;" class="form-inline" role="form"><div style="margin-bottom: 0px;" class="form-group col-sm-5"><label class="sr-only">开始时间</label><div class="input-group date form_date" data-date="" data-date-format="dd MM yyyy" data-link-field="dtp_input1" data-link-format="yyyy-mm-dd"><input style="min-height:32px;" class="form-control" type="text" value="" readonly><span style="min-height:14px;padding:9 10px;" class="input-group-addon"><span style="min-height:14px;" class="glyphicon glyphicon-remove"></span></span><span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span></div><input type="hidden" id="dtp_input1" name="time1" value="" /></div><div style="margin-bottom: 0px;" class="form-group col-sm-5"><label class="sr-only">结束时间</label><div class="input-group date form_date" data-date="" data-date-format="dd MM yyyy" data-link-field="dtp_input2" data-link-format="yyyy-mm-dd"><input style="min-height:32px;" class="form-control" type="text" value="" readonly><span style="min-height:14px;padding:9 10px;" class="input-group-addon"><span style="min-height:14px;" class="glyphicon glyphicon-remove"></span></span><span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span></div><input type="hidden" id="dtp_input2" name="time2" value="" /></div><div  style="padding:0px;margin-bottom: 0px;" class="form-group col-sm-2"><button class="search-btn btn btn-default" type="button"><i class="glyphicon glyphicon-search"></i> 查询</button></div></form></div>').appendTo(f),using("datetime",function(){f.find(".form_date").datetimepicker({minView:"month",language:"zh-CN",format:"yyyy-mm-dd",todayBtn:1,autoclose:1})});else if(d.search){var h=d.search.formGroup;b.$search=a('<div class="'+d.search.size+'"><div class="search-box"><form class="search-form"><input name="'+h[0].name+'" type="text" class="form-control" placeholder="'+h[0].placeholder+'"><button type="button" class="btn btn-link search-btn search-only"><i class="glyphicon glyphicon-search"></i></button></form></div></div>').appendTo(f),d.searchSenior&&(b.$search.find(".search-btn").removeClass("search-only"),a('<button type="button" class="btn btn-link senior-btn"><i class="glyphicon glyphicon-option-horizontal"></i></button>').appendTo(b.$search.find(".search-form")))}if(d.custom){var i={wrap:'<div class="custom"></div>',align:"left",size:"col-sm-4",onLoad:function(){}},j=a.extend(!0,{},i,d.custom),k=a('<div class="custom '+j.size+'"></div>').prependTo(f);f.find(".custom"),j.id&&k.html(a(j.id).html()),j.onLoad(_row.find(k))}}return e},g=function(b,d){d=d||{};var e=a.data(b,c).options,f={totalPage:d.totalPage||e.totalPage,total:d.total||e.total,rows:d.rows||e.queryParams.rows,page:d.page||e.queryParams.page,onClick:function(a){e.queryParams.page=a.page,e.queryParams.rows=a.rows,r(b,e.queryParams)}};b.$footer.find("#pagination").dataPage(f),b.$footer.find("#gotoPage").val(f.page),b.$footer.find(".pagination-info").text("当前第"+f.page+"页/共"+f.total+"条信息/"+f.totalPage+"页")},h=function(b){var d=(a.data(b,c).options,a('<div class="porlets-content dataGrid-body" style="padding-bottom:0px;"></div>'));return d},i=function(b){var c=a('<div class="headWarp"><table class="table nowrap" style="margin:0"><thead></thead></table></div>');return c},j=function(b){var d=(a.data(b,c).options,a('<div class="tableWarp"><table class="table nowrap table-striped table-hover"><tbody></tbody></table></div>'));return d},k=function(b){var d=a.data(b,c).options,e=d.footerRowSize;d.dialog&&(e=[7,5]);var f=a('<div class="porlets-content dataGrid-footer" style="padding:5px;box-shadow: 0 -1px 5px 0 rgba(0, 0, 0, 0.1);">            <div class="row">                <div class="col-lg-'+e[0]+'"><ul id="pagination" class="pagination pull-left" style="margin:0"></ul><div style="line-height:34px;" class="pagination-info pull-right"></div></div>                <div class="col-lg-'+e[1]+'">                <div class="row"><div class="col-lg-4"><div class="input-group  pull-right"><span style="min-height:34px;" class="input-group-addon" title="跳转页面"><i class="glyphicon glyphicon-arrow-right"></i></span><input id="gotoPage" style="min-height:34px;padding:6px 5px;" value="'+d.queryParams.page+'" type="number" class="form-control small-input" title="跳转页面"></div></div>                <div class="col-lg-4"><div class="input-group  pull-right"><span style="min-height:34px;" class="input-group-addon" title="显示行数"><i class="glyphicon glyphicon-th-list"></i></span><input id="rows" style="min-height:34px;padding:6px 5px;" value="'+d.queryParams.rows+'" type="number" class="form-control small-input" title="显示行数"></div></div>                <div class="col-lg-4"><div class="btn-group pull-right"><div class="btn-group dropup"><button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"><i class="glyphicon glyphicon-option-horizontal"></i></button><ul class="columns dropdown-menu dropdown-menu-right"></ul></div><a type="button" id="refresh" class="btn btn-default"><i class="glyphicon glyphicon-refresh"></i></a></div></div></div>                </div>            </div>            </div>');return f},l=function(b){var d=a.data(b,c).options;u(b),v(b),a(b).css(d.size);var e={dif:d.dif+126||126,boxShadow:"0px 5px 20px rgba(0, 0, 0, 0.2)"};d.dialog&&(e.boxShadow="none"),d.showHeader===!1?e.dif=e.dif-38:e.dif=e.dif+38*(d.columns.length-1),d.showFooter===!1&&(e.dif=e.dif-44),d.toolbar===!1&&(e.dif=e.dif-44),a(b).css({overflow:"hidden",marginTop:10,marginBottom:10,boxShadow:e.boxShadow}),b.$tableWarp.css({height:d.size.height-e.dif});var f;if(f?b.$tableWarp.getNiceScroll().resize():using("niceScroll",function(){f=b.$tableWarp.niceScroll({cursorcolor:"#959595",cursorborder:"0px solid #fff",cursorborderradius:"0px",cursorwidth:"10px"})}),b.$tableWarp.scroll(function(c){f&&f.scrollLeft()>0?a(b).find(".headWarp,.summary").css("margin-left",0-f.scrollLeft()):f&&0==f.scrollLeft()&&a(b).find(".headWarp,.summary").css("margin-left",0)}),d.border&&(b.$tableHeader.addClass("border"),b.$tableWarp.addClass("border")),0==d.showHeader&&b.$tableHeader.hide(),!d.footer&&d.data&&b.$footer.hide(),d.toolbar===!1&&b.$header.hide(),d.showSummary&&a('<table style="width:'+d.size.width+'px;position:fixed;bottom:44px;background:#fff" class="summary table nowrap"><tbody></tbody></table>').appendTo(b.$tableWarp),d.toolbar.group){var g={icon:"glyphicon-th-list",showAll:{code:"",name:"全部"},index:0,autoLoad:!0,onSelectValue:function(a,b){return{page:1,state:b.code}},onSelect:function(a,b){}};if(d.toolbar.group.length>0);else{var h=d.toolbar.group;d.toolbar.group=[],d.toolbar.group[0]=h}a.each(d.toolbar.group,function(c,d){function e(a,c,d){h.find("span.groupName").text(c.name),h.find(".dropdown-menu li:eq("+a+")").addClass("active").siblings().removeClass("active"),d||(i.onSelect(a,c),i.autoLoad&&!i.noReload?r(b,i.onSelectValue(a,c)):i.onSelectValue(a,c))}function f(b){b.length>=0&&(i.showAll&&b.splice(0,0,i.showAll),a.each(b,function(c,d){a("<li>",{html:'<a href="javascript:;">'+d.name+"</a>",click:function(){e(c,b[c])}}).appendTo(h.find(".dropdown-menu"))}),e(i.index,b[i.index],!0))}var h,i=a.extend(!0,{},g,d);i.replace?(c=i.replace-1,h=b.$header.find(".row #group_"+c),h.find(".dropdown-menu").empty()):h=a("<div>",{id:"group_"+c,"class":"btn-group ",html:'<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">                                    <i class="glyphicon  '+i.icon+'"></i>                                     <span class="groupName"></span>                                    <span class="caret"></span>                                </button>                                <ul class="dropdown-menu" role="menu"></ul>'}).appendTo(b.$header.find(".tools > .btn-group")),i.url?a.getJSON(i.url,i.queryParams,function(b){0==b.code?f(b.data):a.tips(b.message)}):i.data&&f(i.data)})}},m=function(b){var d=a.data(b,c).options,e=b.$tableWarp.find("input[type='checkbox']:checked"),f=[];return e.each(function(c,e){var g=b.$tableWarp.find("input[type='checkbox']").index(a(this));f.push({index:g,row:d.gridData[g]})}),0==e.length?null:f},n=function(b){var d=a.data(b,c).options,e=b.$tableWarp.find("input[type='checkbox']:checked"),f=b.$tableWarp.find("input[type='checkbox']").index(e);return f>=0?{index:f,row:d.gridData[f]}:null},o=function(b){var d=a.data(b,c).options,e=n(b);return e?e.row[d.idField]:null},p=function(b,d){var e=a.data(b,c).options,f=m(b);if(f){var g=[];return a.each(f,function(a,b){g.push(b.row[e.idField])}),d&&"json"===d?g:g.join()}return null},q=function(b){var d=a.data(b,c).options;return d.queryParams},r=function(b,d){d=d||{};var e=a.data(b,c).options;if(e.data)x(b,{code:0,rows:e.data});else{e.queryParams=a.extend(!0,{},e.queryParams,d);var f=a(b).loading();e.load?a.ajax({url:e.url,type:"POST",dataType:"json",data:e.queryParams,success:function(c,d,f){return"-8"==c.code?void a.tips("-8"):(c=e.loadFilter(c),c.hasOwnProperty("total")&&c.hasOwnProperty("rows")?(e.total=c.total,e.totalPage=c.totalPage||Math.ceil(c.total/e.rows),x(b,c),void e.onLoad(c)):void a.tips("返回数据格式必须包含：total，rows"))},error:function(b,c,d){a.tips(b)},complete:function(a,c,d){f.loading("close"),g(b)}}):(f.loading("close"),x(b,{code:0,rows:[]}))}},s=function(b,d){var e=a.data(b,c).options;r(b,e.queryParams)},t=function(b,c){var d={};return a.each(c,function(a,e){e.field==b&&(d=c[a])}),d},u=function(b){var d=a.data(b,c).options,e=d.size.width;if(d.size.width>0){var f=[],g=d.columns[0].length;a.each(d.columns,function(c,h){var i=a("<tr>").appendTo(b.$tableHeader.find("thead"));a.each(h,function(h,j){var k=0==j.display?"hide":"",l=0,m=!1;if(j.halign||(j.halign="text-left"),j.checkbox){var n=a('<th data-name="'+j.field+'" class="check_box '+k+" "+j.halign+'" style="width:40px;padding:0"></th>').prependTo(i);l=40,e-=40,g-=1,j.rowspan&&n.attr("rowspan",j.rowspan),j.colspan&&n.attr("colspan",j.colspan)}else{j.width&&(g-=1,e-=j.width,m=!0),l=j.width>0?j.width:parseInt(e/g);
var n=a('<th data-name="'+j.field+'" class="'+k+" "+j.halign+'">'+j.title+"</th>").appendTo(i);if(0==c)n.css("width",l);else for(var o in f)if(f[o].field==j.parentField){var p=f[o].colspan;n.css("width",p),f.push({field:j.field,width:p,cwidth:p,colspan:p,set:!0,display:0==j.display?0:1})}j.rowspan&&n.attr("rowspan",j.rowspan),j.colspan&&n.attr("colspan",j.colspan),j.resizable&&0==c&&using("resizable",function(){n.resizable({alsoResize:"#"+b.id+" [data-name='"+j.field+"']",minWidth:100,handles:"e",resize:function(b,c){a.each(d.columnsWidth,function(a,b){b.field==j.field&&(b.cwidth=c.size.width)})}}),b.$tableHeader.addClass("border"),b.$tableWarp.addClass("border")}),j.sortable&&n.addClass("sort_both")}0==c&&f.push({field:j.field,width:l,cwidth:l,colspan:parseInt(l/j.colspan),set:m,display:0==j.display?0:1})})}),b.$tableHeader.on("click","th.sort_both",function(){a(this).removeClass("sort_both").addClass("sort_desc"),r(b,{sort:a(this).attr("data-name"),order:"desc"})}),b.$tableHeader.on("click","th.sort_desc",function(){a(this).removeClass("sort_desc").addClass("sort_asc"),r(b,{sort:a(this).attr("data-name"),order:"asc"})}),b.$tableHeader.on("click","th.sort_asc",function(){a(this).removeClass("sort_asc").addClass("sort_both"),r(b,{sort:d.sortName,order:d.sortOrder})}),d.columnsWidth=f,r(b)}else setTimeout(function(){u(b)},5)},v=function(b){var d=a.data(b,c).options,e=b.$footer.find(".columns");a.each(d.columns[0],function(c,f){f.checkbox||a("<li>",{"class":0==f.display?"":"active",html:'<a href="javascript:;"> '+f.title+"</a>",click:function(){a(this);if(a(this).toggleClass("active"),!(e.find(".active").length>0))return a(this).toggleClass("active"),!1;a(b).find("[data-name='"+f.field+"']").toggleClass("hide");var c=b.$tableHeader.find("th.hide").length,g=b.$tableHeader.find("th:not('.hide,.check_box')").length;if(0==c&&b.$tableHeader.find("th:not('check_box')").each(function(){var c=a(this),e=c.attr("data-name");a.each(d.columnsWidth,function(f,g){e==g.field&&"check_box"!=g.field&&(c.css("width",g.width),a(b).find("[data-name='"+e+"']").css("width",g.width),d.columnsWidth[f].display=1,d.columnsWidth[f].cwidth=g.width)})}),c>0){var h=d.size.width;b.$tableHeader.find("th.check_box")[0]&&(h-=40),b.$tableHeader.find("th.hide:not('.check_box')").each(function(b){var c=a(this),e=c.attr("data-name");a.each(d.columnsWidth,function(a,b){e==b.field&&"check_box"!=b.field&&(d.columnsWidth[a].display=0,d.columnsWidth[a].cwidth=0)})}),b.$tableHeader.find("th:not('.hide,.check_box')").each(function(){var e=a(this),f=e.attr("data-name");a.each(d.columnsWidth,function(i,j){f==j.field&&"check_box"!=j.field&&(j.set&&h/c<=j.width?(g-=1,h-=j.width,e.css("width",j.width),a(b).find("[data-name='"+f+"']").css("width",j.width),d.columnsWidth[i].cwidth=j.width):(e.css("width",h/g),a(b).find("[data-name='"+f+"']").css("width",h/g),d.columnsWidth[i].cwidth=h/g),d.columnsWidth[i].display=1)})})}}}).appendTo(e)})},w=function(b){function d(b,c){b&&a.each(b,function(a,b){b.colspan?d(e.columns[++c],c):f.push(b)})}var e=a.data(b,c).options,f=[],g=0;return d(e.columns[g],g),f},x=function(b,d){var e=a.data(b,c).options;if(b.$tableWarp.find("tbody").empty(),0==d.hasOwnProperty("code")&&(d.code=0),0==d.code)if(d.rows.length>0){var f=w(b);a.each(d.rows,function(c,g){var h=a("<tr>",{"class":e.rowClass(c,g),css:e.rowCss(c,g),"data-index":c,click:function(){a(this).find("input[type='checkbox']").click()}}).appendTo(b.$tableWarp.find("tbody"));a.each(f,function(f,i){var j=t(i.field,e.columnsWidth),k=a("<td>",{"data-name":i.field,"class":0==j.display?"hide":""}).appendTo(h);k.css("width",j.cwidth),a.each(g,function(f,j){if(i.field==f){if(i.formatter)k.html(i.formatter(j,d.rows,c,k));else if(i.formatterBtn)k.html('<div class="btn-group btn-group-sm"></div>'),j?a("<button>",{type:"button","class":"btn btn-default",html:i.formatterBtn.confirmText,click:function(){i.formatterBtn.onConfirmClick(d.rows[c])}}).appendTo(k.find(".btn-group")):a("<button>",{type:"button","class":"btn btn-default",html:i.formatterBtn.cancelText,click:function(){i.formatterBtn.onCancelClick(d.rows[c])}}).appendTo(k.find(".btn-group"));else if(i.checkbox){a("<input>",{name:f,type:"checkbox",value:j}).appendTo(k).on("click",function(d){e.singleSelect?h.hasClass("success")?h.removeClass("success"):h.addClass("success").siblings().removeClass("success").find("input[type='checkbox']").prop("checked",!1):h.toggleClass("success"),e.onClickRow(c,g);var f=b.$tableWarp.find("input[type='checkbox']:checked");f.length>0&&b.btnParams?a.each(b.btnParams,function(a,d){var e=d.isEnabled(c,g);d.isVerifyRow&&b.$btn[a].btn("disabled",!1),b.$btn[a].btn("disabled",!e)}):b.btnParams&&a.each(b.btnParams,function(a,c){c.isVerifyRow&&b.$btn[a].btn("disabled",!0)}),d.stopPropagation()})}else k.html(null==j?" ":j);i.align&&k.addClass(""+i.align)}})})}),e.showSummary&&d.summary&&d.summary.length>0&&a.each(d.summary,function(c,d){a('<tr style="height:35px;"></tr>').appendTo(b.$tableWarp.find("tbody")[0]);var f=a("<tr>").appendTo(a(b).find(".summary tbody"));a.each(e.columns[0],function(b,c){var g=t(c.field,e.columnsWidth),h=a("<td>",{"data-name":c.field,"class":0==g.display?"hide":"",css:{width:g.cwidth},html:" "}).appendTo(f);c.align&&h.addClass(""+c.align),a.each(d,function(a,b){c.field==a&&h.html(b)}),f.find("td:eq(0)").html(d.productid).addClass("text-right")})}),e.gridData=d.rows}else y(b,"暂无数据");else y(b,"出错了:"+d.message)},y=function(b,d){var e=a.data(b,c).options;a("<p>",{css:{position:"relative",top:150,margin:"0 auto"},"class":"loadmore",html:'<span class="loadmore__tips">'+d+"</span>"}).appendTo(b.$tableWarp.find("tbody")),e.gridData=[],e.totalPage=0,e.total=0},z=function(b){var d=a.data(b,c).options;if(d.dialog)d.size={width:d.size.width||a(b).parents(".modal-body").width(),height:d.size.height||a(b).parents(".modal-body").height()},l(b);else{var e=a(b).parents("body.iframe"),f=a(b).parents("div[class^='col']:eq(0)");"true"==a(e).attr("data-isLoad")?(d.size={width:f.width(),height:e.height()-20},l(b)):setTimeout(function(){z(b)},100)}},A={init:function(b){return b=b||{},this.each(function(){var e=a.data(this,c);e||(e=a.data(this,c,{options:a.extend(!0,{},a.fn[c].defaults,b)}),d(this))})},opts:function(b){var d=null;return this.each(function(){d=a.data(this,c).options,b&&(d=a.extend(!0,{},d,b),a.data(this,c,{options:d}))}),d},getRow:function(){var a=null;return this.each(function(){a=n(this)}),a},getRows:function(a){var b=null;return this.each(function(){b=m(this,a)}),b},getId:function(){var a=null;return this.each(function(){a=o(this)}),a},getIds:function(a){var b=null;return this.each(function(){b=p(this,a)}),b},getQueryParams:function(){var a=null;return this.each(function(){a=q(this)}),a},getData:function(a){return this.each(function(){r(this,a)})},reload:function(a){return this.each(function(){s(this,a)})}};a.fn[c]=function(){var b=arguments[0];return A[b]?(b=A[b],b.apply(this,Array.prototype.slice.call(arguments,1))):"object"!=typeof b&&b?(a.error("Method "+b+" does not exist on jQuery."+c),this):A.init.apply(this,arguments)},a.fn[c].defaults={idField:"id",showHeader:!0,showFooter:!0,size:{},toolbar:{size:"col-sm-6",align:"left"},search:{size:"col-sm-5",onLoad:function(a){},formGroup:[{name:"search",type:"text",labelName:"查询",placeholder:"录入查询条件"}]},searchSenior:!1,custom:!1,footer:!0,footerRowSize:[9,3],border:!1,load:!0,minWidth:0,total:0,totalPage:0,page:1,rows:10,queryParams:{page:1,rows:10},dialog:!1,onLoad:function(a){},onClickRow:function(a,b){},checkbox:!1,onCheck:function(a,b){},onUncheck:function(a,b){},singleSelect:!0,rowClass:function(a,b){return""},rowCss:function(a,b){return{}},loadFilter:function(a){return a.rows=a.data,delete a.data,a}}}(jQuery),function(a,b){"use strict";var c="dataPage",d=function(b){e(b),a(b).on("click","li",function(){if(!a(this).hasClass("disabled")&&!a(this).hasClass("active")){var c=a(this).attr("data-toPage");return f(b,{page:c}),a(b).off("click","**"),!1}})},e=function(b){a(b).empty();var d=a.data(b,c).options,e=Number(d.page),f=(e-1)*d.rows+1;f+1*d.rows-1;a("<li>",{"class":1==d.page&&"disabled","data-toPage":1,html:'<a class="disabled" href="javascript:;">&laquo;</a>'}).appendTo(b);for(var g=d.step;g>1;g--){var h=e-g+1;h>0&&a("<li>",{"data-toPage":h,html:'<a href="javascript:;">'+h+"</a>"}).appendTo(b)}for(var i=(a("<li>",{"class":"active",html:'<a href="javascript:;">'+e+"</a>"}).appendTo(b),1);i<d.step;i++){var h=e+i;h<=d.totalPage&&a("<li>",{"data-toPage":h,html:'<a href="javascript:;">'+h+"</a>"}).appendTo(b)}return a("<li>",{"class":d.page==d.totalPage&&"disabled","data-toPage":d.totalPage,html:'<a class="disabled" href="javascript:;">&raquo;</a>'}).appendTo(b),b},f=function(b,d){var f=a.data(b,c);f=a.data(b,c,{options:a.extend(!0,{},f.options,d)});var g=f.options;g.onClick({page:g.page,rows:g.rows}),e(b)},g={init:function(b){return b=b||{},this.each(function(){var e=a.data(this,c);e=e?a.data(this,c,{options:a.extend(!0,{},e.options,b)}):a.data(this,c,{options:a.extend(!0,{},a.fn[c].defaults,b)}),d(this)})},clickFunction:function(a){return this.each(function(){f(this,a)})}};a.fn[c]=function(){var b=arguments[0];return g[b]?(b=g[b],b.apply(this,Array.prototype.slice.call(arguments,1))):"object"!=typeof b&&b?(a.error("Method "+b+" does not exist on jQuery."+c),this):g.init.apply(this,arguments)},a.fn[c].defaults={rows:10,page:1,totalPage:1,total:1,step:5,onClick:function(a){}}}(jQuery),function(a,b){"use strict";function c(b){var c=a.data(b,"form").options;if(a(b).attr("enctype")&&"multipart/form-data"==a(b).attr("enctype")){var e=new FormData;a(b).find("input[type='file']").each(function(b){var c=a(this),d=c.attr("name");d||(d="file"),e.append(d,c[0].files[0])}),a.each(a(b).serializeJson(),function(a,b){e.append(a,b)}),c.data=e,c.processData=!1,c.contentType=!1,c.async=!1}else c.data=a(b).serialize();d(b)}function d(b){var c=a.data(b,"form").options;a.ajax({type:"post",data:c.data,dataType:"json",async:c.async,processData:c.processData,url:c.url||a(b).attr("action"),beforeSend:function(d,e){if(c.isDisabled&&c.confirmBtn&&c.confirmBtn.length&&c.confirmBtn.attr("disabled","disabled"),c.isLoading&&a(b).loading({container:".modal-dialog",loadingText:"请稍候.."}),c.isValidate){var f;return a(b).find("input[data-valid],select[data-valid]").each(function(){var b=a(this).validate("state");return b?void 0:void a.tips("-3")}),f}return!0},success:function(b){0==b.code?c.onSuccess(b):-8==b.code?a.tips("-8"):a.tips(b.message)},error:function(b,c,d){4==b.readyState&&200==b.status&&"false"==this.url&&a.tips("-4")},complete:function(){c.isLoading&&a(b).loading("close"),c.isDisabled&&c.confirmBtn&&c.confirmBtn.length&&c.confirmBtn.removeAttr("disabled")}})}function e(b,c){var d=a(b);for(var e in c){var f=c[e];d.find('input[name="'+e+'"]').val(f),d.find('textarea[name="'+e+'"]').val(f),d.find('select[name="'+e+'"]').val(f),d.find('input[type="checkbox"]').each(function(b){a(this).attr("name")===e&&"1"===f&&a(this).attr("checked","true")})}}var f="form",g=function(a){},h={init:function(b){return b=b||{},this.each(function(){var c=a.data(this,f);c||(c=a.data(this,f,{options:a.extend(!0,{},a.fn[f].defaults,b)}),g(this))})},options:function(){return a.data(this[0],"form").options},submit:function(){return h.init.apply(this,Array.prototype.slice.call(arguments,1)),this.each(function(){c(this)})},post:function(){return h.init.apply(this,Array.prototype.slice.call(arguments,1)),this.each(function(){if("BUTTON"==this.nodeName||"confirm"==this.id){var b=a.data(this,"form").options;b.confirmBtn="BUTTON"==this.nodeName?a(this):a(this).find("button")}d(this)})},load:function(){var a=Array.prototype.slice.call(arguments,1);return this.each(function(){e(this,a[0])})},validate:function(){return validate(this[0])}};a.fn[f]=function(){var b=arguments[0];return h[b]?(b=h[b],b.apply(this,arguments)):"object"!=typeof b&&b?(a.error("Method "+b+" does not exist on jQuery."+f),this):(a.tips("创建类型参数未设置！"),this)},a.fn[f].defaults={async:!0,processData:!0,contentType:!0,isLoading:!0,isValidate:!0,isDisabled:!0,enctype:!1,confirmBtn:null,onSuccess:function(a,b,c,d){}}}(jQuery),function(){function a(a,b){var c=!1,d=document.createElement("script");d.type="text/javascript",d.language="javascript",d.src=a,d.onload=d.onreadystatechange=function(){c||d.readyState&&"loaded"!=d.readyState&&"complete"!=d.readyState||(c=!0,d.onload=d.onreadystatechange=null,b&&b.call(d))},document.getElementsByTagName("head")[0].appendChild(d)}function b(b,c){a(b,function(){document.getElementsByTagName("head")[0].removeChild(this),c&&c()})}function c(a,b){var c=document.createElement("link");c.rel="stylesheet",c.type="text/css",c.media="screen",c.href=a,document.getElementsByTagName("head")[0].appendChild(c),b&&b.call(c)}function d(b,d){function e(){g[b]="loaded",loader.onProgress(b),d&&d()}g[b]="loading";var h=f[b],i="loading",j=loader.css&&h.css?"loading":"loaded";if(loader.css&&h.css){if(/^http/i.test(h.css))var k=h.css;else var k=loader.base+"/css/"+h.css;c(k,function(){j="loaded","loaded"==i&&"loaded"==j&&e()})}if(/^http/i.test(h.js))var k=h.js;else var k=loader.base+"/js/"+h.js;a(k,function(){i="loaded","loaded"==i&&"loaded"==j&&e()})}function e(a,c){function e(a){if(f[a]){var b=f[a].dependencies;if(b)for(var c=0;c<b.length;c++)e(b[c]);j.push(a)}}function h(){c&&c(),loader.onLoad(a)}function i(){if(j.length){var a=j[0];g[a]?"loaded"==g[a]?(j.shift(),i()):m<loader.timeout&&(m+=10,setTimeout(arguments.callee,10)):(k=!0,d(a,function(){j.shift(),i()}))}else if(loader.locale&&1==k&&locales[loader.locale]){var c=loader.base+"locale/"+locales[loader.locale];b(c,function(){h()})}else h()}var j=[],k=!1;if("string"==typeof a)e(a);else for(var l=0;l<a.length;l++)e(a[l]);var m=0;i()}var f={areaData:{js:"cityPickData.js"},area:{js:"cityPicker.js",css:"area.css",dependencies:["areaData"]},datatimeLanguage:{js:"bootstrap-datetimepicker.min.js"},datetime:{js:"bootstrap-datetimepicker.zh-CN.js",css:"datetimepicker.min.css",dependencies:["datatimeLanguage"]},niceScroll:{js:"jquery.nicescroll.js"},resizable:{js:"jquery.resizable.js"},accordion:{js:"accordion.js"}},g={};loader={modules:f,base:window.parent.ctx+"/p",css:!0,locale:null,timeout:2e3,load:function(b,d){/\.css$/i.test(b)?/^http/i.test(b)?c(b,d):c(loader.base+b,d):/\.js$/i.test(b)?/^http/i.test(b)?a(b,d):a(loader.base+b,d):e(b,d)},onProgress:function(a){},onLoad:function(a){}};for(var h=document.getElementsByTagName("script"),i=0;i<h.length;i++){var j=h[i].src;if(j){var k=j.match(/loader\.js(\W|$)/i);k&&(loader.base=j.substring(0,k.index))}}window.using=loader.load}(),function(a,b){"use strict";var c="view",d=function(b){e(b),a(window).resize(function(){k(b)}),b.$tab.on("click",function(){f(b)})},e=function(b){b.$spinner=a(b).loading({type:"spinner"});var d=a.data(b,c).options;b.$tab=g(b),b.$tab.appendTo(d.navTabs),b.$tabPane=h(b),b.$tabPane.appendTo(d.content),b.$iframe=i(b),b.$iframe.appendTo(b.$tabPane),b.$iframe[0].addEventListener("load",function(){try{k(b),b.$spinner.loading("close")}catch(a){}},!1),b.$tab.tab("show"),a(b).addClass("showtab"),j(b)},f=function(b){var d=a.data(b,c).options;d["default"]?a(b).find(".sub a").removeClass("active"):(a(b).find("a").addClass("active"),a(b).siblings().find("a").removeClass("active"))},g=function(b){var d=a.data(b,c).options,e=a("<li>",{"class":"active",id:"liTab_"+d.id,role:"presentation",html:'<a href="#'+d.id+'" id="'+d.id+'-tab" role="tab" data-toggle="tab">'+d.text+' <i class="glyphicon glyphicon-triangle-bottom"></i></a>'});return d["default"]&&e.addClass("default"),e},h=function(b){var d=a.data(b,c).options;d.content.find(".tab-pane").removeClass("active");var e=a('<div role="tabpanel" id="'+d.id+'" class="tab-pane active" />');return d["default"]&&e.addClass("default"),e},i=function(b){var d=a.data(b,c).options,e=a('<iframe id="iframe_'+b.id+'" scrolling="auto" frameborder="0" style="width:100%" src="'+d.ctx+d.url+'" />');return e},j=function(b){var d=a.data(b,c).options;a("#"+d.id+"-tab").rightMenu({menuEvent:"right-click",menuSource:"element",menuPosition:"belowLeft",actionsGroups:[["refresh"],["del","other","full"]],actions:{refresh:{name:"刷新",iconClass:"glyphicon glyphicon-refresh",onClick:function(){o(b)}},del:{name:"关闭当前页",iconClass:"glyphicon glyphicon-remove",onClick:function(){p(b)},isEnabled:function(a){return d["default"]?!1:!0}},other:{name:"关闭其他标签页",iconClass:"glyphicon glyphicon-option-horizontal",onClick:function(){r(b)}},full:{name:"全屏",iconClass:"glyphicon glyphicon-fullscreen",onClick:function(a){l(b)},isEnabled:function(a){return d["default"]?!1:!0}}}})},k=function(b){var d=a.data(b,c).options,e=a(window).height(),f=a(".header.navbar-fixed-top").outerHeight(),g=b.$tab.outerHeight(),h=e-f-g;b.$iframe.css("height",h);b.$iframe.contents().find("body")[0];b.$iframe.contents().find("body").css({width:d.content.width(),height:h,margin:0}).attr("data-isLoad","true"),b.$iframe.contents().find("[data-height]").each(function(){var b=h;"true"!=a(this).attr("data-height")&&(b=h-Number(a(this).attr("data-height"))),a(this).css("height",b);var c=a(this).find(".dataGrid-block"),d=a(this).find(".tableWarp");c[0]&&(c.css("height",b),d.css("height",b-135))})},l=function(b){a.data(b,c).options;n(b),b.$fullIframe=m(b),b.$fullIframe.appendTo("body"),b.$fullIframe.on("load",function(){b.$fullIframe.focus(),b.$fullIframe.contents().find("body").css({width:a(window).width(),height:a(window).height()}).attr("data-isLoad","true"),a(b.$fullIframe[0].contentWindow.document).on("keyup",function(a){27==a.keyCode&&(b.$fullIframe.remove(),o(b))})}),a.tips("按ESC退出全屏模式")},m=function(b){var d=a.data(b,c).options,e=a('<iframe id="iframe_'+d.id+'" scrolling="auto" frameborder="0" style="width:'+a(window).width()+"px;position: absolute;height: "+a(window).height()+'px;z-index: 1030;" src="'+d.ctx+d.url+'" />');return e},n=function(b){a.data(b,c).options;b.$tab.tab("show"),b.$tabPane.addClass("active").siblings().removeClass("active"),f(b),k(b)},o=function(b){var d=a.data(b,c).options;b.$iframe.attr("src",d.ctx+d.url),b.$iframe.on("load",function(){k(b)})},p=function(b){var d=a.data(b,c).options;b.$iframe[0].src="about:blank",b.$tab.remove(),b.$tabPane.remove(),q(b),d.navTabs.find("li:last() a").click()},q=function(b){a.data(b,c).options;a(b).removeClass("showtab"),a.removeData(b,c)},r=function(b){a.data(b,c).options;n(b),a("#nav-accordion li.showtab").each(function(){a(this).find("a").hasClass("active")||p(this)})},s={init:function(b){return b=b||{},this.each(function(){var e=a.data(this,c);e?n(this):(e=a.data(this,c,{options:a.extend(!0,{},a.fn[c].defaults,b)}),d(this))})},render:function(){return this.each(function(){e(this)})},size:function(){return this.each(function(){k(this)})},showTab:function(){return this.each(function(){n(this)})},refresh:function(){return this.each(function(){o(this)})},close:function(){return this.each(function(){p(this)})},fullScreen:function(){return this.each(function(){l(this)})},closeOther:function(){return this.each(function(){r(this)})}};a.fn[c]=function(){var b=arguments[0];return s[b]?(b=s[b],b.apply(this,Array.prototype.slice.call(arguments,1))):"object"!=typeof b&&b?(a.error("Method "+b+" does not exist on jQuery."+c),this):s.init.apply(this,arguments)},a.fn[c].defaults={navTabs:a("#viewTab"),content:a("#viewContent"),ctx:window.parent.ctx,curIndex:0,full:!1}}(jQuery),function(a){"use strict";var b="loading",c=function(c){var e=a.data(c,b).options;c.$container=a(e.container),c.$loading=d(c),c.$loading.appendTo(c.$container)},d=function(c){var d=a.data(c,b).options;switch(d.type){case"loading":return a('<div class="_loading"><div class="mask_transparent"></div><div style="z-index: '+d.zIndex+'" class="toast"><i class="loading"></i><p class="toast__content">'+d.loadingText+"</p></div></div>");case"spinner":return a('<div class="_loading"><div class="mask_transparent"></div><div style="z-index: '+d.zIndex+'" class="spinner"><div class="double-bounce1"></div><div class="double-bounce2"></div></div></div>')}},e=function(c){var d=a.data(c,b);d&&d.options&&d.options.destroy&&(f(c),c.$loading.remove())},f=function(c){a.removeData(c,b)},g=function(a,b){a.$loading.find(".toast__content").text(b.loadingText)},h={init:function(d){return d=d||{},this.each(function(){var e=a.data(this,b);e?g(this,d):(e=a.data(this,b,{options:a.extend(!0,{},a.fn[b].defaults,d)}),c(this))})},close:function(){this.each(function(){e(this)})},destroy:function(a){return this.each(function(){f(this)})},text:function(a){return this.each(function(){g(this,a)})}};a.fn[b]=function(){var c=arguments[0];return h[c]?(c=h[c],c.apply(this,Array.prototype.slice.call(arguments,1))):"object"!=typeof c&&c?(a.error("Method "+c+" does not exist on jQuery."+b),this):h.init.apply(this,arguments)},a.fn[b].defaults={destroy:!0,container:"body",type:"loading",zIndex:9e3,loadingText:"数据加载中..."}}(jQuery),function(a,b){"use strict";function c(b){this.options=a.extend(!0,{},a.fn.defaults,b);var c=this;c.item(),a(window).width()<750&&(a("#sidebar").addClass("hide-left-bar"),a("#main-content").addClass("merge-left")),a(".sidebar-toggle-box").click(function(b){using("niceScroll",function(){a(".leftside-navigation").niceScroll({cursorcolor:"#959595",cursorborder:"0px solid #fff",cursorborderradius:"0px",cursorwidth:"3px"}),a("#sidebar").toggleClass("hide-left-bar"),a(window).width()<750&&(a("#sidebar").toggleClass("show-left-bar"),a("#main-content").toggleClass("merge-right"),a("#sidebar").toggleClass("hidden-xs")),a("#sidebar").hasClass("hide-left-bar")&&a(".leftside-navigation").getNiceScroll().hide(),a(".leftside-navigation").getNiceScroll().show(),a("#main-content").toggleClass("merge-left")}),b.stopPropagation()}),a("#show-right-info-bar").on("click",function(){a("#show-right-info-bar").hasClass("move")?(a(".right-info-bar").attr("style","right: -250px"),a("#show-right-info-bar").removeClass("move")):(a(".right-info-bar").attr("style","right: 0px"),a("#show-right-info-bar").addClass("move"))})}var d="myMenu";a.extend(c.prototype,{opts:function(){return this.options},item:function(){var b=this,c=b.options;a.each(c.data,function(d,e){if(e.children.length>0){var f=e.icon||"th-list",g=a('<li id="li_'+e.id+' data-row-id="'+e.id+'" class="sub-menu dcjq-parent-li"><a href="javascript:;" class="dcjq-parent"><i class="glyphicon glyphicon-'+f+'"></i><span>'+e.text+'</span></a><ul class="sub"></ul></li>').appendTo(c.target);b.menuEdit(c.edit,e),a.each(e.children,function(d,e){var f=e.icon||"menu-right";a("<li>",{id:"li_"+e.id,"data-row-id":e.id,html:'<a href="javascript:;"><i class="glyphicon glyphicon-'+f+'"></i><span>'+e.text+"</span></a>",click:function(){return a(this).view({id:e.code,text:e.text,contextPath:ctx,url:e.url}),!1}}).appendTo(g.find(".sub")),b.menuEdit(c.edit,e)})}else e.children&&"welcome"!=e.code?a("<li>",{html:"<h3>"+e.text+"</h3>"}).appendTo(c.target):"welcome"==e.code&&a("#nav-accordion").view({id:e.code,text:e.text,contextPath:ctx,url:e.url,"default":!0})}),a("#nav-accordion > li:eq(0) > a").addClass("active"),using("accordion",function(){a("#nav-accordion").dcAccordion({eventType:"click",autoClose:!0,saveState:!0,disableLink:!0,speed:"fast",showCount:!1,autoExpand:!0,classExpand:"dcjq-current-parent"})})},menuEdit:function(b,c){var d=this;d.options;if(b){a("#li_"+c.id).rightMenu({actionsGroups:[["add","ddd"],["edit"]],actions:{ddd:{name:"添加22",iconClass:"glyphicon glyphicon-plus",onClick:function(){d.add(c)},isEnabled:function(){return null!=c.pid?!1:!0}},add:{name:"添加",iconClass:"glyphicon glyphicon-plus",onClick:function(){d.add(c)},isEnabled:function(){return null!=c.pid?!1:!0}},edit:{name:"编辑",iconClass:"glyphicon glyphicon-edit",onClick:function(){},isEnabled:function(a){return!0}}}})}},add:function(b){a(this).dialog("form",{title:"添加菜单",modalSize:"modal-lg",formGroup:[{name:"text",size:"2|10",labelName:"* 菜单名称"},{name:"code",size:"2|10",labelName:"* code名称"},{name:"url",size:"2|10",labelName:"* 菜单路径"},{name:"icon",size:"2|10",labelName:"* 菜单图标"},{name:"methods",size:"2|10",labelName:"* map方法"},{name:"pid",input:{type:"hidden",value:b.id}}],submit:{url:window.parent.ctx+"/menumanage/save",onSuccess:function(b){0==b.code?a.tips("操作成功！",2):a.tips(b.message)}}})}}),a[d]=function(a){return new c(a)},a.fn.defaults={target:"#nav-accordion"}}(jQuery),function(a){"use strict";var b="rightMenu",c=function(c){var f=a.data(c,b).options;c.$container=a(f.container),c.$menu=d(c),c.$menu.hide().appendTo(c.$container),a(c).on("contextmenu",function(a){return e(c,a),!1}),a(c).on("click",function(){c.$menu.hide()}),a(document).on("click",function(){c.$menu.hide()})},d=function(c){var d=a.data(c,b).options,e=a('<div id="dropdown-'+c.id+'" class="dropdown bootstrapMenu" style="z-index:10000;position:absolute;" />'),f=a('<ul class="dropdown-menu" style="position:static;display:block;font-size:0.9em;" />');return a.each(d.actionsGroups,function(b,c){a.each(c,function(a){f.append('<li role="presentation" data-action="'+c[a]+'"><a href="#" role="menuitem"><i class="'+(d.actions[c[a]].iconClass||"")+'"></i> <span class="actionName">'+d.actions[c[a]].name+"</span></a></li>")}),b<d.actionsGroups.length-1&&f.append('<li class="divider"></li>')}),f.on("click","li:not('.disabled')",function(b){var e=a(this),f=a(this).attr("data-action"),g=d.fetchElementData(c);d.actions[f].onClick&&d.actions[f].onClick(g,e),window.event?window.event.returnValue=!1:b.preventDefault()}),e.append(f)},e=function(c,d){var e=a.data(c,b).options,f=c.$menu,g=e.fetchElementData(c);f.find("li[role='presentation']").each(function(b){var c=a(this).attr("data-action");e.actions[c].isEnabled&&0==e.actions[c].isEnabled(g)&&a(this).addClass("disabled")}),f.siblings(".bootstrapMenu").hide();var h=f.children();f.css({display:"block"}),f.css({height:h.height(),width:h.width(),top:a(c).offset().top+a(c).outerHeight(),left:a(c).offset().left})},f={init:function(d){return d=d||{},this.each(function(){var e=a.data(this,b);e?a.extend({},e.options,d):e=a.data(this,b,{options:a.extend(!0,{},a.fn[b].defaults,d)}),c(this)})},destroy:function(c){return this.each(function(){a.removeData(this,b)})},opts:function(){var c={};return this.each(function(){c=a.data(this,b).options}),c}};a.fn[b]=function(){var c=arguments[0];return f[c]?(c=f[c],c.apply(this,Array.prototype.slice.call(arguments,1))):"object"!=typeof c&&c?(a.error("Method "+c+" does not exist on jQuery."+b),this):f.init.apply(this,arguments)},a.fn[b].defaults={container:"body",actionsGroups:[],fetchElementData:function(a){return{}}}}(jQuery),function(a,b){"use strict";function c(b,c){this.options=a.extend(!0,{},a.fn[d].defaults,b,{target:c}),this._getData(c)}var d="select";a.extend(c.prototype,{opts:function(a){return this.options},reload:function(b,c){var d=this,e=d.options;e.load=!0,d._getData(b,a.extend(!0,{},e.queryParams,c))},empty:function(b,c){var d=this,e=d.options;b.empty(),a("<option>",{value:"",html:e.defaultText}).appendTo(b)},_getData:function(b,c){var d=this,e=d.options;c&&(e.queryParams=a.extend(!0,{},e.queryParams,c)),e.load?a.ajax({url:e.url,type:"post",dataType:"json",data:e.queryParams,async:e.async,success:function(c){0==c.code?(b.empty(),e["default"]&&a("<option>",{value:"",html:e.defaultText}).appendTo(b),c.data.length>0&&a.each(c.data,function(c,d){var f=a("<option>",{value:d[e.idField],html:d[e.textField]}).appendTo(b);e.selected&&e.selected==d[e.idField]&&f.attr("selected",!0)}),e.loadData=c.data):a.tips(c.message),b.change(function(){var b=a(this).val(),c={};a.each(e.loadData,function(a,d){b==d[e.idField]&&(c=d)}),e.onSelect(c,a(this))})},complete:function(){e.onLoad(b)}}):a("<option>",{value:"",html:e.defaultText}).appendTo(b)}}),a.fn[d]=function(b,e){var f;this.each(function(){var g;if(!(g=a.data(this,d))){var h=a(this),i=h.data(),j=a.extend({},a.fn[d].defaults,b,i);g=new c(j,h),a.data(this,d,g),f=h}"string"==typeof b&&"function"==typeof g[b]&&(f=g[b].call(g,a(this),e))});return f},a[d]=function(a){},a.fn[d].defaults={url:"",async:!1,queryParams:{},"default":!1,defaultText:"请选择",idField:"id",textField:"name",loadData:[],load:!0,onSelect:function(a,b){},onLoad:function(a){}}}(jQuery),function(a,b){"use strict";var c="tree",d=function(b){var d=a.data(b,c).options;a(b).addClass("list-group zzwTree").css({marginTop:10,marginBottom:10});var f=a("<a>",{id:"treeItem_top",href:"javascript:;","class":"list-group-item active",html:d.title}).appendTo(b);d.onRightClick&&f.rightMenu(d.onRightClick),e(b,{})},e=function(b,c){var d=a(b).parents("body.iframe");"true"==a(d).attr("data-isLoad")?(using("niceScroll",function(){b.$warp=a('<div class="tree-warp" />').appendTo(b).css("height",a(window).height()-62),b.$warp.niceScroll({cursorcolor:"#959595",cursorborder:"0px solid #fff",cursorborderradius:"0px",cursorwidth:"10px"})}),h(b,c)):setTimeout(function(){e(b,c)},100)},f=function(b,d){a.data(b,c).options;d.id&&d.id>0?(a(b).find("#item_"+d.id).empty(),e(b,d)):(a(b).find("a,div").not(".active").remove(),e(b,{id:"all"}))},g=function(b){var d=a.data(b,c).options,e=a(b).find(".info"),f="";return e.length>0&&(f=e.attr("id").split("_")[1]),d.treeData[f],d.treeData[f]},h=function(b,d){d=d||{};var e=a.data(b,c).options;e.queryParams=a.extend(!0,{},e.queryParams,d),a.ajax({url:e.ctx+e.url,type:"POST",dataType:"json",data:e.queryParams,complete:function(a,b){},success:function(c,d,f){i(b,c),a.each(c,function(a,b){e.treeData[b.id]=b}),b.$warp.getNiceScroll().resize()},error:function(a,b,c){}})},i=function(b,d){var e=a.data(b,c).options;if(d.length>0){var f=b.$warp;if("all"!=e.queryParams.id){f=a(b).find("#item_"+e.queryParams.id);var g=d.length*e.rowHeight;f.css("height",g).attr("data-height",g)}a.each(d,function(c,g){var h=g.level<=e.maxLevel?'<span class="level_'+g.level+'"><i class="glyphicon glyphicon-plus"></i></span>':'<i class="level_'+g.level+'"></i>',i=a("<a>",{id:"treeItem_"+g.id,href:"javascript:;","class":"list-group-item",html:h+" "+g.text,click:function(){e.onClick(d[c]),a(b).find(".list-group-item:not('#treeItem_top')").removeClass("info"),a(this).addClass("info")}}).appendTo(f);if(i.on("click","span",function(f){if(a(b).find(".list-group-item:not('#treeItem_top')").removeClass("info"),"close"==g.state&&g.level<=e.maxLevel)a(this).find("i").removeClass("glyphicon-plus").addClass("glyphicon-minus"),a(this).parents("a.list-group-item").addClass("info").after('<div id="item_'+g.id+'" style="height: 0px;" class="list-group"></div>'),g.toDiv=!0,g.state="open",e.onSelect(d[c]);else if("open"==g.state||"show"==g.state)a(this).find("i").removeClass("glyphicon-minus").addClass("glyphicon-plus"),a(this).parents("a.list-group-item").next("#item_"+g.id).css("height",0),g.state="hide";else if("hide"==g.state){a(this).find("i").removeClass("glyphicon-plus").addClass("glyphicon-minus");var h=a(this).parents("a.list-group-item").next("#item_"+g.id);a(this).parents("a.list-group-item").addClass("info"),h.css("height",h.attr("data-height")),g.state="show"}f.stopPropagation()}),e.onRightClick){var j=a.extend(!0,{},{fetchElementData:function(){return g}},e.onRightClick);i.rightMenu(j)}})}else a.tips("未得到数据")},j={init:function(b){return b=b||{},this.each(function(){var e=a.data(this,c);e?a.extend({},e.options,b):e=a.data(this,c,{options:a.extend(!0,{},a.fn[c].defaults,b)}),d(this)})},opts:function(){return a.data(this[0],c).options},getData:function(a){return this.each(function(){h(this,a)})},refresh:function(a){return this.each(function(){f(this,a)})},getRow:function(){return g(this[0])}};a.fn[c]=function(){var b=arguments[0];return j[b]?(b=j[b],b.apply(this,Array.prototype.slice.call(arguments,1))):"object"!=typeof b&&b?(a.error("Method "+b+" does not exist on jQuery."+c),this):j.init.apply(this,arguments)},a.fn[c].defaults={treeData:{},title:"Tree",rowHeight:41,maxLevel:2,onSelect:function(a){},onClick:function(a){},onRightClick:!1}}(jQuery),function(a,b){"use strict";var c="validate",d={tit:"提示信息",w:{r:"必填项！",x:"必选项！","*":"不能为空！","*min-max":"请填写min到max位任意字符！","*len":"请填写len位任意字符！",n:"请填写数字！","nmin-max":"请填写min到max位数字！",nlen:"请填写len位任意位数字！",
s:"不能输入特殊字符！","s6-18":"请填写6到18位字符！",p:"请填写邮政编码！",m:"请填写手机号码！",e:"邮箱地址格式不对！",url:"请填写网址！"},def:"请填写正确信息！",undef:"datatype未定义！",reck:"两次输入的内容不一致！",r:"通过信息验证！",c:"正在检测信息…",s:"请{填写|选择}{0|信息}！",v:"所填信息没有经过验证，请稍后…",p:"正在提交数据…"},e={init:function(b){return b=b||{},this.each(function(){var d=a.data(this,c);if(!d){var e=a.extend(!0,{},b);a.each(e,function(b,d){a.fn[c].defaults.hasOwnProperty(b)||delete e[b]}),d=a.data(this,c,{options:a.extend(!0,{},a.fn[c].defaults,e)}),g(this)}})},length:function(){return j(this)},options:function(){return a.data(this[0],c).options},state:function(){f(this[0]);var b=a.data(this[0],c).options;return b.state||!1}},f=function(b){var f=a.data(b,c).options;if(f.validData){var g=f.validData(a(b).val(),a(b));return f.state=g.state,f.msg=g.msg||d.def,f.state}if(f.valiType){var h=f.valiType.split("|");a.each(h,function(a){f.state=e[h[a]].call(b)})}},g=function(b){var d=a.data(b,c).options;a(b).attr("data-valid","true"),b.$feedback=h(b),b.$feedback.insertAfter(b),b.$parent=a(b).parents("#row_"+d.name),d.isFocusin&&a(b).on("focusin",function(){}),d.isFocusout&&"radio"!=b.type&&a(b).on("focusout",function(){f(b),i(b)})},h=function(b){return a('<span style="margin-right: 25px;width:auto;" class="form-control-feedback"></span>')},i=function(b){var d=a.data(b,c).options;d.state?(b.$feedback.html('<i class="glyphicon glyphicon-ok"></i>'),b.$parent.addClass("has-success has-feedback").removeClass("has-error has-feedback")):(b.$feedback.html('<i class="glyphicon glyphicon-remove"></i> '+d.msg),b.$parent.addClass("has-error has-feedback").removeClass("has-success has-feedback"))},j=function(e){var f=a.data(e,c).options,g=f.length.split("-"),h=g[0][0],i=a(e).val();return"SELECT"==e.nodeName&&f.required&&0==i.length?(f.msg=d.w.x,!1):f.required&&0==i.length?(f.msg=d.w.r,!1):1==g.length&&h[1]==b&&0==i.length?(f.msg=f.errorText||d.w[h],!1):1==g.length&&h[1]&&Number(g[0].slice(1))>i.length?(f.msg=f.errorText||d.w[h+"len"].replace("len",f.length),!1):g.length>1&&(g[0].slice(1)>i.length||g[1].slice(1)<i.lengt)?(f.msg=f.errorText||d.w[h+"min-max"].replace("min到max",g[0]+"到"+g[1]),!1):!0};a.fn[c]=function(){var b=arguments[0];return b.isValidate||b.required||"state"==b?e[b]?(b=e[b],b.apply(this,Array.prototype.slice.call(arguments,1))):"object"!=typeof b&&b?(a.error("Method "+b+" does not exist on jQuery."+c),this):e.init.apply(this,arguments):this},a.fn[c].defaults={isValidate:!1,isFocusin:!1,isFocusout:!0,name:null,required:!0,errorText:null,length:"10",valiType:"length",validData:null}}(jQuery);